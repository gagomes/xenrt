<xenrt>

    <!-- Tests for DotNet Agnet Licensed Features -->
    <default name="LICENSESERVER" value ="LicenseServer" />
    <scheduler>
        <resources>memory&gt;=20G/disk1&gt;=200G</resources>
        <param>MACHINES_REQUIRED=2</param>
    </scheduler>
    <variables>
        <LICENSE_SERVER>${LICENSESERVER}</LICENSE_SERVER>
        <LICENSED_EDITION>PerSocketEnterprise</LICENSED_EDITION>
        <UNLICENSED_EDITION>PerSocketStandard</UNLICENSED_EDITION>
    </variables>

    <prepare>
        <pool id="0">
            <host id="0" license="no" defaultlicense="no">
                <vm name="WS2012">
                    <distro>ws12-x64</distro>
                    <arch>x86-64</arch>
                    <memory>2048</memory>
                    <vcpus>2</vcpus>
                    <postinstall action="installDrivers" />
                    <network device="0" />
                    <disk device="0" size="22" />
                </vm>
                <vm name="WS2012(1)">
                    <distro>ws12-x64</distro>
                    <arch>x86-64</arch>
                    <memory>2048</memory>
                    <vcpus>2</vcpus>
                    <postinstall action="installDrivers" />
                    <network device="0" />
                    <disk device="0" size="22" />
                </vm>
            </host>
            <host id="1" license="no" defaultlicense="no">
                <vm name="server">
                    <distro>ubuntu1404</distro>
                    <memory>1024</memory>
                    <vcpus>2</vcpus>
                    <network device="0"/>
                    <disk device="0" size="8" />
                </vm>
                <vm name="${LICENSESERVER}">
                    <file>%LICENSE_SERVER_XVA%</file>
                    <postinstall action="installV6LicenseServer"/>
                </vm>
            </host>
        </pool>
    </prepare>

    <testsequence>
        <testcase id="testcases.xenserver.tc.dotnetagentlicensing.TempTest"/>
        <testcase id="testcases.xenserver.tc.dotnetagentlicensing.VMAutoUpdateToggle"/>
        <testcase id="testcases.xenserver.tc.dotnetagentlicensing.VSSQuiescedSnapshot"/>
        <testcase id="testcases.xenserver.tc.dotnetagentlicensing.PoolAutoUpdateToggle"/>
        <testcase id="testcases.xenserver.tc.dotnetagentlicensing.HTTPRedirect"/>
        <testcase id="testcases.xenserver.tc.dotnetagentlicensing.AllHostsLicensed"/>
    </testsequence>

</xenrt>
